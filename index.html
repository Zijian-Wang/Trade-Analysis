<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Condensed:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <header>
            <h1>Trade Analysis</h1>
            <p>Risk Management & Position Sizing</p>
        </header>

        <main>
            <section class="analysis-panel">
                <!-- Row 1: Portfolio and Risk Level Per Trade -->
                <div class="row">
                    <div class="input-group">
                        <label for="portfolio">Portfolio Value ($) <span class="tooltip"
                                data-tip="Total current value of your trading account.">?</span></label>
                        <input type="text" id="portfolio" placeholder="300,000" value="300,000">
                    </div>
                    <div class="input-group">
                        <label for="riskInput">Risk Level Per Trade (%) <span class="tooltip"
                                data-tip="Percentage of portfolio you are willing to lose on this trade.">?</span></label>
                        <div class="risk-controls">
                            <input type="number" id="riskInput" value="0.75" step="0.05" min="0.1" max="5.0">
                            <input type="range" id="riskSlider" min="0.5" max="2.0" step="0.05" value="0.75">
                        </div>
                    </div>
                </div>

                <!-- Row 2: Direction and Symbol -->
                <div class="row">
                    <div class="input-group">
                        <label>Direction <span class="tooltip"
                                data-tip="Long: Profit if price rises. Short: Profit if price falls.">?</span></label>
                        <div class="toggle-container direction-toggle">
                            <input type="radio" id="long" name="direction" value="Long" checked>
                            <label for="long" class="toggle-btn">Long</label>
                            <input type="radio" id="short" name="direction" value="Short">
                            <label for="short" class="toggle-btn">Short</label>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="symbol">Ticker Symbol <span class="tooltip"
                                data-tip="The stock or asset symbol (e.g., AAPL). Mandatory.">?</span></label>
                        <input type="text" id="symbol" placeholder="AAPL">
                    </div>
                </div>

                <!-- Row 3: Sentiment, Entry, Stop, Target -->
                <div class="row grid-row-3">
                    <div class="input-group span-2-mobile">
                        <label>Sentiment <span class="tooltip"
                                data-tip="Type of trade setup (Trend, Probe, or Breakout).">?</span></label>
                        <div class="toggle-container sentiment-toggle">
                            <input type="radio" id="sentTrend" name="sentiment" value="Trend" checked>
                            <label for="sentTrend" class="toggle-btn">Trend</label>

                            <input type="radio" id="sentProbe" name="sentiment" value="Probe">
                            <label for="sentProbe" class="toggle-btn">Probe</label>

                            <input type="radio" id="sentBreak" name="sentiment" value="Break Out">
                            <label for="sentBreak" class="toggle-btn" id="breakLabel">Break Out</label>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="entry">Entry ($) <span class="tooltip"
                                data-tip="Price at which you enter the trade. Mandatory.">?</span></label>
                        <input type="number" id="entry" step="0.01" placeholder="150.00">
                    </div>
                    <div class="input-group">
                        <label for="stopLoss">Stop Loss ($) <span class="tooltip"
                                data-tip="Price at which you exit to limit loss. Mandatory.">?</span></label>
                        <input type="number" id="stopLoss" step="0.01" placeholder="145.00">
                    </div>
                    <div class="input-group">
                        <label for="takeProfit">Target ($) <span class="tooltip"
                                data-tip="Price at which you take profit (Optional).">?</span></label>
                        <input type="number" id="takeProfit" step="0.01" placeholder="160.00">
                    </div>
                </div>

                <div class="results-container">
                    <div class="result-card">
                        <h3>Position Size <span class="tooltip"
                                data-tip="Number of shares and total dollar value to buy/sell.">?</span></h3>
                        <div class="position-group">
                            <span class="result-value copyable" id="positionSize" title="Click to Copy">---</span>
                            <span class="separator">|</span>
                            <span class="result-value copyable" id="positionValue" title="Click to Copy">---</span>
                        </div>
                    </div>

                    <div class="result-card">
                        <h3>Entry Risk <span class="tooltip"
                                data-tip="Distance from Entry to Stop Loss as a percentage.">?</span></h3>
                        <div class="result-value" id="entryRisk">---</div>
                    </div>

                    <div class="result-card">
                        <h3>Risk Amount <span class="tooltip"
                                data-tip="Dollar amount you will lose if Stop Loss is hit.">?</span></h3>
                        <div class="result-value" id="riskAmount">---</div>
                    </div>

                    <div class="result-card">
                        <h3>Reward / Risk <span class="tooltip"
                                data-tip="Ratio of Potential Profit to Risk Amount.">?</span></h3>
                        <div class="result-value" id="rrRatio">---</div>
                    </div>
                </div>

                <button id="addTradeBtn" class="primary-btn" disabled>Log Trade</button>
            </section>

            <section class="history-panel">
                <div class="history-header">
                    <h2>Trade History</h2>
                    <div class="action-buttons">
                        <button id="copyJsonBtn" class="secondary-btn icon-btn" title="Copy JSON" disabled>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                        <button id="exportBtn" class="secondary-btn" disabled>Export JSON</button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table id="tradeTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Symbol</th>
                                <th>Dir</th>
                                <th>Sent</th>
                                <th>Entry</th>
                                <th>Stop</th>
                                <th>Target</th>
                                <th>Risk%</th>
                                <th>Entry Risk%</th>
                                <th>Shares</th>
                                <th>Risk $</th>
                                <th>R/R</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Trades row will go here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>
    <div id="toast" class="toast hidden"></div>
    <script src="script.js"></script>
</body>

</html>